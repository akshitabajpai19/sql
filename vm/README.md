<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_validation"></a> [validation](#requirement\_validation) | ~> 1.1.1 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azuread"></a> [azuread](#provider\_azuread) | n/a |
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | n/a |
| <a name="provider_random"></a> [random](#provider\_random) | n/a |
| <a name="provider_validation"></a> [validation](#provider\_validation) | ~> 1.1.1 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_avm-res-compute-virtualmachine"></a> [avm-res-compute-virtualmachine](#module\_avm-res-compute-virtualmachine) | Azure/avm-res-compute-virtualmachine/azurerm | 0.15.1 |
| <a name="module_avm-res-network-nsg"></a> [avm-res-network-nsg](#module\_avm-res-network-nsg) | Azure/avm-res-network-networksecuritygroup/azurerm | 0.2.0 |

## Resources

| Name | Type |
|------|------|
| [azurerm_backup_policy_vm.backup_policy](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/backup_policy_vm) | resource |
| [azurerm_management_lock.recovery_lock](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/management_lock) | resource |
| [azurerm_monitor_diagnostic_setting.recovery_diagnostic](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/monitor_diagnostic_setting) | resource |
| [azurerm_proximity_placement_group.primary](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/proximity_placement_group) | resource |
| [azurerm_recovery_services_vault.recovery](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/recovery_services_vault) | resource |
| [azurerm_role_assignment.recovery](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/role_assignment) | resource |
| [random_string.username](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/string) | resource |
| [validation_warning.admin_password](https://registry.terraform.io/providers/tlkamp/validation/latest/docs/resources/warning) | resource |
| [validation_warning.admin_ssh_public_key](https://registry.terraform.io/providers/tlkamp/validation/latest/docs/resources/warning) | resource |
| [azuread_group.default_contrib_group](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/data-sources/group) | data source |
| [azuread_group.vmadminlogin](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/data-sources/group) | data source |
| [azuread_group.vmcontributor](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/data-sources/group) | data source |
| [azuread_group.vmreader](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/data-sources/group) | data source |
| [azuread_group.vmuserlogin](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/data-sources/group) | data source |
| [azuread_service_principal.ad_default_spn](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/data-sources/service_principal) | data source |
| [azurerm_key_vault.vault](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/key_vault) | data source |
| [azurerm_network_security_group.nsg](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/network_security_group) | data source |
| [azurerm_network_security_group.nsg_public](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/network_security_group) | data source |
| [azurerm_resource_group.vnet-public-rg](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/resource_group) | data source |
| [azurerm_resource_group.vnet-rg](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/resource_group) | data source |
| [azurerm_storage_account.diagstorage](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/storage_account) | data source |
| [azurerm_subnet.subnet](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/subnet) | data source |
| [azurerm_subnet.subnet_public](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/subnet) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_aad_ssh_login_extension_version"></a> [aad\_ssh\_login\_extension\_version](#input\_aad\_ssh\_login\_extension\_version) | VM Extension version for Azure Active Directory SSH Login extension | `string` | `"1.0"` | no |
| <a name="input_accelerated_networking"></a> [accelerated\_networking](#input\_accelerated\_networking) | Enable accelerated networking? | `bool` | `false` | no |
| <a name="input_additional_security_rules"></a> [additional\_security\_rules](#input\_additional\_security\_rules) | - `access` - (Required) Specifies whether network traffic is allowed or denied. Possible values are `Allow` and `Deny`.<br> - `name` - (Required) Name of the network security rule to be created.<br> - `description` - (Optional) A description for this rule. Restricted to 140 characters.<br> - `destination_address_prefix` - (Optional) CIDR or destination IP range or * to match any IP. Tags such as `VirtualNetwork`, `AzureLoadBalancer` and `Internet` can also be used. Besides, it also supports all available Service Tags like ‘Sql.WestEurope‘, ‘Storage.EastUS‘, etc. You can list the available service tags with the CLI:<pre>shell az network list-service-tags --location westcentralus</pre>. For further information please see [Azure CLI<br> - `destination_address_prefixes` - (Optional) List of destination address prefixes. Tags may not be used. This is required if `destination_address_prefix` is not specified.<br> - `destination_application_security_group_ids` - (Optional) A List of destination Application Security Group IDs<br> - `destination_port_range` - (Optional) Destination Port or Range. Integer or range between `0` and `65535` or `*` to match any. This is required if `destination_port_ranges` is not specified.<br> - `destination_port_ranges` - (Optional) List of destination ports or port ranges. This is required if `destination_port_range` is not specified.<br> - `direction` - (Required) The direction specifies if rule will be evaluated on incoming or outgoing traffic. Possible values are `Inbound` and `Outbound`.<br> - `name` - (Required) The name of the security rule. This needs to be unique across all Rules in the Network Security Group. Changing this forces a new resource to be created.<br> - `priority` - (Required) Specifies the priority of the rule. The value can be between 100 and 4096. The priority number must be unique for each rule in the collection. The lower the priority number, the higher the priority of the rule.<br> - `protocol` - (Required) Network protocol this rule applies to. Possible values include `Tcp`, `Udp`, `Icmp`, `Esp`, `Ah` or `*` (which matches all).<br> - `resource_group_name` - (Required) The name of the resource group in which to create the Network Security Rule. Changing this forces a new resource to be created.<br> - `source_address_prefix` - (Optional) CIDR or source IP range or * to match any IP. Tags such as `VirtualNetwork`, `AzureLoadBalancer` and `Internet` can also be used. This is required if `source_address_prefixes` is not specified.<br> - `source_address_prefixes` - (Optional) List of source address prefixes. Tags may not be used. This is required if `source_address_prefix` is not specified.<br> - `source_application_security_group_ids` - (Optional) A List of source Application Security Group IDs<br> - `source_port_range` - (Optional) Source Port or Range. Integer or range between `0` and `65535` or `*` to match any. This is required if `source_port_ranges` is not specified.<br> - `source_port_ranges` - (Optional) List of source ports or port ranges. This is required if `source_port_range` is not specified.<br><br> ---<br> `timeouts` block supports the following:<br> - `create` - (Defaults to 30 minutes) Used when creating the Network Security Rule.<br> - `delete` - (Defaults to 30 minutes) Used when deleting the Network Security Rule.<br> - `read` - (Defaults to 5 minutes) Used when retrieving the Network Security Rule.<br> - `update` - (Defaults to 30 minutes) Used when updating the Network Security Rule. | <pre>map(object({<br>    access                                     = string<br>    name                                       = string<br>    description                                = optional(string)<br>    destination_address_prefix                 = optional(string)<br>    destination_address_prefixes               = optional(set(string))<br>    destination_application_security_group_ids = optional(set(string))<br>    destination_port_range                     = optional(string)<br>    destination_port_ranges                    = optional(set(string))<br>    direction                                  = string<br>    priority                                   = number<br>    protocol                                   = string<br>    source_address_prefix                      = optional(string)<br>    source_address_prefixes                    = optional(set(string))<br>    source_application_security_group_ids      = optional(set(string))<br>    source_port_range                          = optional(string)<br>    source_port_ranges                         = optional(set(string))<br>    timeouts = optional(object({<br>      create = optional(string)<br>      delete = optional(string)<br>      read   = optional(string)<br>      update = optional(string)<br>    }))<br>  }))</pre> | `{}` | no |
| <a name="input_additional_unattend_contents"></a> [additional\_unattend\_contents](#input\_additional\_unattend\_contents) | List of objects representing unattend content settings<br><br>- `content` (Required) - The XML formatted content that is added to the unattend.xml file for the specified path and component. Changing this forces a new resource to be created.<br>- `setting` (Required) - The name of the setting to which the content applies. Possible values are `AutoLogon` and `FirstLogonCommands`. Changing this forces a new resource to be created.<br><br>Example Inputs:<pre>hcl<br>#Example Reboot<br>additional_unattend_contents = [<br>  {<br>    content = "<FirstLogonCommands><SynchronousCommand><CommandLine>shutdown /r /t 0 /c \"initial reboot\"</CommandLine><Description>reboot</Description><Order>1</Order></SynchronousCommand></FirstLogonCommands>"<br>    setting = "FirstLogonCommands"<br>  }<br>]</pre> | <pre>list(object({<br>    content = string<br>    setting = string<br>  }))</pre> | `[]` | no |
| <a name="input_additionalcontext"></a> [additionalcontext](#input\_additionalcontext) | used for naming purposes such as 01 or 02 | `string` | n/a | yes |
| <a name="input_admin_password"></a> [admin\_password](#input\_admin\_password) | Default Password - Random if left blank. For Linux, need to have disable\_password\_authentication set to false | `string` | `""` | no |
| <a name="input_admin_ssh_public_key"></a> [admin\_ssh\_public\_key](#input\_admin\_ssh\_public\_key) | (Linux) Public SSH Key - Generated if left blank | `string` | `""` | no |
| <a name="input_admin_username"></a> [admin\_username](#input\_admin\_username) | Default Username - Random if left blank | `string` | `""` | no |
| <a name="input_akv_resource_id"></a> [akv\_resource\_id](#input\_akv\_resource\_id) | Resource ID of the AKV to store the machine credentials. Use this one in case that the AKV is in a different subscription | `string` | `null` | no |
| <a name="input_appFunction"></a> [appFunction](#input\_appFunction) | app function | `string` | n/a | yes |
| <a name="input_appid"></a> [appid](#input\_appid) | The related application for resources. Used for tagging and naming purposes. | `string` | n/a | yes |
| <a name="input_appname"></a> [appname](#input\_appname) | the app name for the resources.  Used for tagging and naming purposes | `string` | n/a | yes |
| <a name="input_auto_shutdown_enabled"></a> [auto\_shutdown\_enabled](#input\_auto\_shutdown\_enabled) | Enable Auto Shutdown? | `bool` | `false` | no |
| <a name="input_auto_shutdown_notification_enabled"></a> [auto\_shutdown\_notification\_enabled](#input\_auto\_shutdown\_notification\_enabled) | Enable Auto Shutdown Notification | `bool` | `false` | no |
| <a name="input_auto_shutdown_notification_time"></a> [auto\_shutdown\_notification\_time](#input\_auto\_shutdown\_notification\_time) | Time to send the shutdown notification prior shutdown 0 - 120 minutes | `string` | `null` | no |
| <a name="input_auto_shutdown_notification_webhook_url"></a> [auto\_shutdown\_notification\_webhook\_url](#input\_auto\_shutdown\_notification\_webhook\_url) | Webhook URL to send the shutdown notification | `string` | `null` | no |
| <a name="input_auto_shutdown_time"></a> [auto\_shutdown\_time](#input\_auto\_shutdown\_time) | Time to shutdown the VM - Format: HHMM | `string` | `"0000"` | no |
| <a name="input_auto_shutdown_timezone"></a> [auto\_shutdown\_timezone](#input\_auto\_shutdown\_timezone) | Timezone to shutdown the VM - Format: UTC, GMT, etc https://jackstromberg.com/2017/01/list-of-time-zones-consumed-by-azure/ | `string` | `"UTC"` | no |
| <a name="input_availability_zone"></a> [availability\_zone](#input\_availability\_zone) | The Zone in which this Virtual Machine should be created. Changing this forces a new resource to be created. | `number` | `null` | no |
| <a name="input_backup_diagnostic_settings"></a> [backup\_diagnostic\_settings](#input\_backup\_diagnostic\_settings) | This map object is used to define the diagnostic settings on the virtual machine.  This functionality does not implement the diagnostic settings extension, but instead can be used to configure sending the vm metrics to one of the standard targets.<br><br>- `<map_key>` - unique key to define the map element<br>  - `name`                                     = (required) - Name to use for the Diagnostic setting configuration.  Changing this creates a new resource<br>  - `log_categories_and_groups`                = (Optional) - List of strings used to define log categories and groups. Currently not valid for the VM resource<br>  - `metric_categories`                        = (Optional) - List of strings used to define metric categories. Currently only AllMetrics is valid<br>  - `log_analytics_destination_type`           = (Optional) - Valid values are null, AzureDiagnostics, and Dedicated.  Defaults to null<br>  - `workspace_resource_id`                    = (Optional) - The Log Analytics Workspace Azure Resource ID when sending logs or metrics to a Log Analytics Workspace<br>  - `storage_account_resource_id`              = (Optional) - The Storage Account Azure Resource ID when sending logs or metrics to a Storage Account<br>  - `event_hub_authorization_rule_resource_id` = (Optional) - The Event Hub Namespace Authorization Rule Resource ID when sending logs or metrics to an Event Hub Namespace<br>  - `event_hub_name`                           = (Optional) - The Event Hub name when sending logs or metrics to an Event Hub<br>  - `marketplace_partner_resource_id`          = (Optional) - The marketplace partner solution Azure Resource ID when sending logs or metrics to a partner integration<br><br>Example Input:<br>  diagnostic\_settings = {<br>    vm\_diags = {<br>      name                  = module.naming.monitor\_diagnostic\_setting.name\_unique<br>      workspace\_resource\_id = azurerm\_log\_analytics\_workspace.this\_workspace.id<br>      metric\_categories     = ["AllMetrics"]<br>    }<br>  } | <pre>map(object({<br>    name                                     = optional(string, null)<br>    log_categories                           = optional(set(string), [])<br>    log_groups                               = optional(set(string), [])<br>    metric_categories                        = optional(set(string), ["AllMetrics"])<br>    log_analytics_destination_type           = optional(string, "Dedicated")<br>    workspace_resource_id                    = optional(string, null)<br>    storage_account_resource_id              = optional(string, null)<br>    event_hub_authorization_rule_resource_id = optional(string, null)<br>    event_hub_name                           = optional(string, null)<br>    marketplace_partner_resource_id          = optional(string, null)<br>  }))</pre> | `{}` | no |
| <a name="input_backup_lock"></a> [backup\_lock](#input\_backup\_lock) | "The lock configuration to apply to this virtual machine and all of it's child resources. The following properties are specified.<br><br>- `kind` - (Required) - The type of the lock.  Possible values are `CanNotDelete` and `ReadOnly`.<br>- `name` - (Optional) - The name of the lock.  If not specified, a name will be generated based on the `kind` value. Changing this forces the creation of a new resource.<br><br>Example Inputs:<pre>hcl<br>lock = {<br>  name = "lock-{resourcename}" # optional<br>  type = "CanNotDelete" <br>}</pre> | <pre>object({<br>    name = optional(string, null)<br>    kind = string<br>  })</pre> | `null` | no |
| <a name="input_backup_policy_resource_id"></a> [backup\_policy\_resource\_id](#input\_backup\_policy\_resource\_id) | (Optional) The ID of the Backup Policy to assign to this Recovery Services Vault. If not provided, a default policy will be created. | `string` | `""` | no |
| <a name="input_backup_policy_type"></a> [backup\_policy\_type](#input\_backup\_policy\_type) | (optional) Specify Backup Policy Type. LongTermRetentionPolicy (default), SimpleRetentionPolicy | `string` | `"V1"` | no |
| <a name="input_backup_role_assignments"></a> [backup\_role\_assignments](#input\_backup\_role\_assignments) | A map of role assignments to create on this resource. The map key is deliberately arbitrary to avoid issues where map keys maybe unknown at plan time.<br><br>- `role_definition_id_or_name` - The ID or name of the role definition to assign to the principal.<br>- `principal_id` - The ID of the principal to assign the role to.<br>- `description` - The description of the role assignment.<br>- `skip_service_principal_aad_check` - If set to true, skips the Azure Active Directory check for the service principal in the tenant. Defaults to false.<br>- `condition` - The condition which will be used to scope the role assignment.<br>- `condition_version` - The version of the condition syntax. Valid values are '2.0'.<br><br>> Note: only set `skip_service_principal_aad_check` to true if you are assigning a role to a service principal. | <pre>map(object({<br>    role_definition_id_or_name             = string<br>    principal_id                           = string<br>    description                            = optional(string, null)<br>    skip_service_principal_aad_check       = optional(bool, false)<br>    condition                              = optional(string, null)<br>    condition_version                      = optional(string, null)<br>    delegated_managed_identity_resource_id = optional(string, null)<br>    principal_type                         = optional(string, null)<br>  }))</pre> | `{}` | no |
| <a name="input_bypass_platform_safety_checks_on_user_schedule_enabled"></a> [bypass\_platform\_safety\_checks\_on\_user\_schedule\_enabled](#input\_bypass\_platform\_safety\_checks\_on\_user\_schedule\_enabled) | (Optional) Specifies whether to skip platform scheduled patching when a user schedule is associated with the VM. This value can only be set to true when patch\_mode is set to AutomaticByPlatform | `bool` | `false` | no |
| <a name="input_capacity_reservation_group_resource_id"></a> [capacity\_reservation\_group\_resource\_id](#input\_capacity\_reservation\_group\_resource\_id) | (Optional) Specifies the Azure Resource ID of the Capacity Reservation Group with the Virtual Machine should be allocated to. Cannot be used with availability\_set\_id or proximity\_placement\_group\_id | `string` | `null` | no |
| <a name="input_costAllocation"></a> [costAllocation](#input\_costAllocation) | can only be sharedcosts or chargeback | `string` | n/a | yes |
| <a name="input_costAppOwnerManager"></a> [costAppOwnerManager](#input\_costAppOwnerManager) | The app owner manager responsible for resources. Used for tagging purposes. | `string` | n/a | yes |
| <a name="input_costAppOwnerTech"></a> [costAppOwnerTech](#input\_costAppOwnerTech) | The app owner responsible for resources. Used for tagging and naming purposes. | `string` | n/a | yes |
| <a name="input_costBudgetOwner"></a> [costBudgetOwner](#input\_costBudgetOwner) | The budget owner responsible for resources. Used for tagging purposes. | `string` | n/a | yes |
| <a name="input_costCostCenter"></a> [costCostCenter](#input\_costCostCenter) | The cost center code for resources. Used for tagging and naming purposes. | `string` | n/a | yes |
| <a name="input_costDivision"></a> [costDivision](#input\_costDivision) | cost division | `string` | n/a | yes |
| <a name="input_costVP"></a> [costVP](#input\_costVP) | The cost vp for resources. Used for tagging purposes. | `string` | n/a | yes |
| <a name="input_costbaseline"></a> [costbaseline](#input\_costbaseline) | year resource created | `string` | n/a | yes |
| <a name="input_cross_region_restore_enabled"></a> [cross\_region\_restore\_enabled](#input\_cross\_region\_restore\_enabled) | (optional) Specify Cross Region Restore. true, false (default). var.storage\_mode\_type must GeoRedundant when setting to true | `bool` | `false` | no |
| <a name="input_custom_data"></a> [custom\_data](#input\_custom\_data) | The Base64-Encoded Custom Data which should be used for this Virtual Machine | `string` | `null` | no |
| <a name="input_custom_image_id"></a> [custom\_image\_id](#input\_custom\_image\_id) | Custom machine image ID | `string` | `null` | no |
| <a name="input_customer_managed_key"></a> [customer\_managed\_key](#input\_customer\_managed\_key) | An object type defines a customer managed key to use for encryption.<br><br>- `key_vault_resource_id` - (Required) - The full Azure Resource ID of the key\_vault where the customer managed key will be referenced from.<br>- `key_name` - (Required) - The full Azur Resource ID of the customer managed Key stored in the key vault<br>- `key_version` - (Optional) - Customer managed key version<br>- `user_assigned_identity` - (Optional) - The user assigned identity to use when access the encryption key saved in a key vault<br><br><br>Example Inputs:<pre>terraform<br>key_vault_resource_id = {<br>  key_vault_resource_id = "https://kv-giuh.vault.azure.net/keys/kvk-giuh/0127xxxxx4fdd94cdbd26481a1985"<br>  key_name  = "https://kv-giuh.vault.azure.net/keys/kvk-giuh/0127xxxxx4fdd94cdbd26481a1985"<br>  version = null<br>  user_assigned_identity = {<br>    resource_id = "/subscriptions/0000000-0000-0000-0000-000000000000/resourceGroups/rg-test/providers/Microsoft.ManagedIdentity/userAssignedIdentities/uai-name"<br>  }<br>}</pre> | <pre>object({<br>    key_vault_resource_id = string<br>    key_name              = string<br>    key_version           = optional(string, null)<br>    user_assigned_identity = optional(object({<br>      resource_id = string<br>    }), null)<br>  })</pre> | `null` | no |
| <a name="input_data_disk_caching"></a> [data\_disk\_caching](#input\_data\_disk\_caching) | The Caching of the Data Disk. Possible values are None, ReadOnly, ReadWrite. Changing this forces a new resource to be created. | `string` | `"None"` | no |
| <a name="input_data_disk_create_option"></a> [data\_disk\_create\_option](#input\_data\_disk\_create\_option) | the Create Option of the Data Disk, such as Empty or Attach. Defaults to Attach. Changing this forces a new resource to be created. | `string` | `"Empty"` | no |
| <a name="input_data_disk_enabled"></a> [data\_disk\_enabled](#input\_data\_disk\_enabled) | Create and attach a data disk? | `bool` | `false` | no |
| <a name="input_data_disk_machine_lun"></a> [data\_disk\_machine\_lun](#input\_data\_disk\_machine\_lun) | The Logical Unit Number of the Data Disk. Changing this forces a new resource to be created. | `string` | `"0"` | no |
| <a name="input_data_disk_size_gb"></a> [data\_disk\_size\_gb](#input\_data\_disk\_size\_gb) | The data size of disk to be create | `number` | `256` | no |
| <a name="input_data_disk_type"></a> [data\_disk\_type](#input\_data\_disk\_type) | Type of storage account to use with the Data disk - Options: Standard\_LRS, StandardSSD\_LRS or Premium\_LRS | `string` | `"Premium_LRS"` | no |
| <a name="input_dedicated_host_group_resource_id"></a> [dedicated\_host\_group\_resource\_id](#input\_dedicated\_host\_group\_resource\_id) | (Optional) The Azure Resource ID of the dedicated host group where this virtual machine should run. Conflicts with dedicated\_host\_resource\_id (dedicated\_host\_group\_id on the azurerm provider) | `string` | `null` | no |
| <a name="input_dedicated_host_resource_id"></a> [dedicated\_host\_resource\_id](#input\_dedicated\_host\_resource\_id) | (Optional) The Azure Resource ID of the dedicated host where this virtual machine should run. Conflicts with dedicated\_host\_group\_resource\_id (dedicated\_host\_group\_id on the azurerm provider) | `string` | `null` | no |
| <a name="input_diagnostic_settings"></a> [diagnostic\_settings](#input\_diagnostic\_settings) | This map object is used to define the diagnostic settings on the virtual machine.  This functionality does not implement the diagnostic settings extension, but instead can be used to configure sending the vm metrics to one of the standard targets.<br><br>- `<map_key>` - unique key to define the map element<br>  - `name`                                     = (required) - Name to use for the Diagnostic setting configuration.  Changing this creates a new resource<br>  - `log_categories_and_groups`                = (Optional) - List of strings used to define log categories and groups. Currently not valid for the VM resource<br>  - `metric_categories`                        = (Optional) - List of strings used to define metric categories. Currently only AllMetrics is valid<br>  - `log_analytics_destination_type`           = (Optional) - Valid values are null, AzureDiagnostics, and Dedicated.  Defaults to null<br>  - `workspace_resource_id`                    = (Optional) - The Log Analytics Workspace Azure Resource ID when sending logs or metrics to a Log Analytics Workspace<br>  - `storage_account_resource_id`              = (Optional) - The Storage Account Azure Resource ID when sending logs or metrics to a Storage Account<br>  - `event_hub_authorization_rule_resource_id` = (Optional) - The Event Hub Namespace Authorization Rule Resource ID when sending logs or metrics to an Event Hub Namespace<br>  - `event_hub_name`                           = (Optional) - The Event Hub name when sending logs or metrics to an Event Hub<br>  - `marketplace_partner_resource_id`          = (Optional) - The marketplace partner solution Azure Resource ID when sending logs or metrics to a partner integration<br><br>Example Input:<br>  diagnostic\_settings = {<br>    vm\_diags = {<br>      name                  = module.naming.monitor\_diagnostic\_setting.name\_unique<br>      workspace\_resource\_id = azurerm\_log\_analytics\_workspace.this\_workspace.id<br>      metric\_categories     = ["AllMetrics"]<br>    }<br>  } | <pre>map(object({<br>    name                                     = optional(string, null)<br>    log_categories                           = optional(set(string), [])<br>    log_groups                               = optional(set(string), [])<br>    metric_categories                        = optional(set(string), ["AllMetrics"])<br>    log_analytics_destination_type           = optional(string, "Dedicated")<br>    workspace_resource_id                    = optional(string, null)<br>    storage_account_resource_id              = optional(string, null)<br>    event_hub_authorization_rule_resource_id = optional(string, null)<br>    event_hub_name                           = optional(string, null)<br>    marketplace_partner_resource_id          = optional(string, null)<br>  }))</pre> | `{}` | no |
| <a name="input_disable_password_authentication"></a> [disable\_password\_authentication](#input\_disable\_password\_authentication) | (Linux) Disable Password Authentication | `bool` | `true` | no |
| <a name="input_disk_controller_type"></a> [disk\_controller\_type](#input\_disk\_controller\_type) | (Optional) - Specifies the Disk Controller Type used for this Virtual Machine.  Possible values are `SCSI` and `NVME`. | `string` | `null` | no |
| <a name="input_edge_zone"></a> [edge\_zone](#input\_edge\_zone) | (Optional) Specifies the Edge Zone within the Azure Region where this Virtual Machine should exist. Changing this forces a new Virtual Machine to be created. | `string` | `null` | no |
| <a name="input_enable_boot_diagnostics"></a> [enable\_boot\_diagnostics](#input\_enable\_boot\_diagnostics) | Whether to enable boot diagnostics on the virtual machine. | `bool` | `true` | no |
| <a name="input_encryption_at_host_enabled"></a> [encryption\_at\_host\_enabled](#input\_encryption\_at\_host\_enabled) | (Optional) Should all of the disks (including the temp disk) attached to this Virtual Machine be encrypted by enabling Encryption at Host? | `bool` | `null` | no |
| <a name="input_env"></a> [env](#input\_env) | The environment code the for resources. Used for tagging and naming purposes. | `string` | n/a | yes |
| <a name="input_eviction_policy"></a> [eviction\_policy](#input\_eviction\_policy) | (Optional) Specifies what should happen when the Virtual Machine is evicted for price reasons when using a Spot instance. Possible values are Deallocate and Delete. Changing this forces a new resource to be created. This value can only be set when priority is set to Spot | `string` | `null` | no |
| <a name="input_extensions"></a> [extensions](#input\_extensions) | This map of objects is used to create additional `azurerm_virtual_machine_extension` resources, the argument descriptions could be found at [the document](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/virtual_machine_extension).<br><br>- `<map key>` - Provide a custom key value to define each extension object<br>  - `name` (Required) - Set a custom name on this value if you want the guest configuration extension to have a custom name<br>  - `publisher` (Required) - Configure the publisher for the extension to be deployed. The Publisher and Type of Virtual Machine Extensions can be found using the Azure CLI, via: az vm extension image list --location westus -o table<br>  - `type` (Required) - Configure the type value for the extension to be deployed. <br>  - `type_handler_version` (Required) - The type handler version for the extension. A common value is 1.0.<br>  - `auto_upgrade_minor_version` (Optional) - Set this to false to avoid automatic upgrades for minor versions on the extension.  Defaults to true<br>  - `automatic_upgrade_enabled` (Optional) - Set this to false to avoid automatic upgrades for major versions on the extension.  Defaults to true<br>  - `failure_suppression_enabled` (Optional) - Should failures from the extension be suppressed? Possible values are true or false. Defaults to false. Operational failures such as not connecting to the VM will not be suppressed regardless of the failure\_suppression\_enabled value.<br>  - `settings` (Optional) - The settings passed to the extension, these are specified as a JSON object in a string. Certain VM Extensions require that the keys in the settings block are case sensitive. If you're seeing unhelpful errors, please ensure the keys are consistent with how Azure is expecting them (for instance, for the JsonADDomainExtension extension, the keys are expected to be in TitleCase.)<br>  - `protected_settings` (Optional) - The protected\_settings passed to the extension, like settings, these are specified as a JSON object in a string. Certain VM Extensions require that the keys in the protected\_settings block are case sensitive. If you're seeing unhelpful errors, please ensure the keys are consistent with how Azure is expecting them (for instance, for the JsonADDomainExtension extension, the keys are expected to be in TitleCase.)<br>  - `provision_after_extensions` (Optional) - list of strings that specifies the collection of extension names after which this extension needs to be provisioned.<br>  - `protected_settings_from_key_vault` (Optional) object for protected settings.  Cannot be used with `protected_settings`<br>    - `secret_url` (Required) - The Secret URL of a Key Vault Certificate. This can be sourced from the `secret_id` field within the `azurerm_key_vault_certificate` Resource.<br>    - `source_vault_id` (Required) - the Azure resource ID of the key vault holding the secret<br>  - `tags` (Optional) - A mapping of tags to assign to the extension resource.<br><br>Example Inputs:<pre>hcl<br>#custom script extension example - linux<br>extensions = [<br>  {<br>    name = "CustomScriptExtension"<br>    publisher = "Microsoft.Azure.Extensions"<br>    type = "CustomScript"<br>    type_handler_version = "2.0"<br>    settings = <<SETTINGS<br>      {<br>        "script": "<base 64 encoded script file>"<br>      }<br>    SETTINGS<br>  }<br>]<br><br>#custom script extension example - windows<br>extensions = [<br>  {<br>    name = "CustomScriptExtension"<br>    publisher = "Microsoft.Compute"<br>    type = "CustomScriptExtension"<br>    type_handler_version = "1.10"<br>    settings = <<SETTINGS<br>      {<br>        "timestamp":123456789<br>      }<br>    SETTINGS<br>    protected_settings = <<PROTECTED_SETTINGS<br>      {<br>        "commandToExecute": "myExecutionCommand",<br>        "storageAccountName": "myStorageAccountName",<br>        "storageAccountKey": "myStorageAccountKey",<br>        "managedIdentity" : {},<br>        "fileUris": [<br>            "script location"<br>        ]<br>      }<br>    PROTECTED_SETTINGS        <br>  }<br>]</pre> | <pre>map(object({<br>    kernel_type                 = string<br>    name                        = string<br>    publisher                   = string<br>    type                        = string<br>    type_handler_version        = string<br>    auto_upgrade_minor_version  = optional(bool)<br>    automatic_upgrade_enabled   = optional(bool)<br>    failure_suppression_enabled = optional(bool, false)<br>    settings                    = optional(string)<br>    protected_settings          = optional(string)<br>    provision_after_extensions  = optional(list(string), [])<br>    tags                        = optional(map(string), null)<br>    protected_settings_from_key_vault = optional(object({<br>      secret_url      = string<br>      source_vault_id = string<br>    }))<br>  }))</pre> | `{}` | no |
| <a name="input_generate_admin_password_or_ssh_key"></a> [generate\_admin\_password\_or\_ssh\_key](#input\_generate\_admin\_password\_or\_ssh\_key) | Set this value to true if the deployment should create a strong password for the admin user. | `bool` | `true` | no |
| <a name="input_identity_ids"></a> [identity\_ids](#input\_identity\_ids) | Specifies a list of user managed identity ids to be assigned to the VM | `list(string)` | `[]` | no |
| <a name="input_identity_type"></a> [identity\_type](#input\_identity\_type) | The Managed Service Identity Type of this Virtual Machine. Possible values are SystemAssigned (where Azure will generate a Managed Identity for you), UserAssigned (where you can specify the Managed Identities ID). | `string` | `"SystemAssigned"` | no |
| <a name="input_immutability"></a> [immutability](#input\_immutability) | (optional) Specify Immutability Setting of vault. Locked, Unlocked, Disabled (default) | `string` | `"Disabled"` | no |
| <a name="input_kernel_type"></a> [kernel\_type](#input\_kernel\_type) | Virtual machine kernel - windows or linux | `string` | `"linux"` | no |
| <a name="input_location"></a> [location](#input\_location) | The Azure region where resources will be deployed | `string` | n/a | yes |
| <a name="input_lock"></a> [lock](#input\_lock) | "The lock configuration to apply to this virtual machine and all of it's child resources. The following properties are specified.<br><br>- `kind` - (Required) - The type of the lock.  Possible values are `CanNotDelete` and `ReadOnly`.<br>- `name` - (Optional) - The name of the lock.  If not specified, a name will be generated based on the `kind` value. Changing this forces the creation of a new resource.<br><br>Example Inputs:<pre>hcl<br>lock = {<br>  name = "lock-{resourcename}" # optional<br>  type = "CanNotDelete" <br>}</pre> | <pre>object({<br>    name = optional(string, null)<br>    kind = string<br>  })</pre> | `null` | no |
| <a name="input_machine_creds_akv_rg"></a> [machine\_creds\_akv\_rg](#input\_machine\_creds\_akv\_rg) | Resource Group of the AKV to store the machine credentials | `string` | `""` | no |
| <a name="input_machine_ssh_port"></a> [machine\_ssh\_port](#input\_machine\_ssh\_port) | The SSH port to be used for the VM | `number` | `22` | no |
| <a name="input_managed_identities"></a> [managed\_identities](#input\_managed\_identities) | An object that sets the managed identity configuration for the virtual machine being deployed. Be aware that capabilities such as the Azure Monitor Agent and Role Assignments require that a managed identity has been configured.<br><br>- `system_assigned`            = (Optional) Specifies whether the System Assigned Managed Identity should be enabled.  Defaults to false. <br>- `user_assigned_resource_ids` = (Optional) Specifies a set of User Assigned Managed Identity IDs to be assigned to this Virtual Machine.<br><br>Example Inputs:<pre>hcl<br>#default system managed identity<br>managed_identities = {<br>  system_assigned = true<br>}<br>#user assigned managed identity only<br>managed_identities           = {<br>  user_assigned_resource_ids = ["<azure resource ID of a user assigned managed identity>"]<br>}<br>#user assigned and system assigned managed identities<br>managed_identities  = {<br>  system_assigned            = true<br>  user_assigned_resource_ids = ["<azure resource ID of a user assigned managed identity>"]<br>}</pre> | <pre>object({<br>    system_assigned            = optional(bool, false)<br>    user_assigned_resource_ids = optional(set(string), [])<br>  })</pre> | `{}` | no |
| <a name="input_max_bid_price"></a> [max\_bid\_price](#input\_max\_bid\_price) | (Optional) The maximum price you're willing to pay for this Virtual Machine, in US Dollars; which must be greater than the current spot price. If this bid price falls below the current spot price the Virtual Machine will be evicted using the `eviction_policy`. Defaults to `-1`, which means that the Virtual Machine should not be evicted for price reasons. This can only be configured when `priority` is set to `Spot`. | `number` | `-1` | no |
| <a name="input_monthlyBudget"></a> [monthlyBudget](#input\_monthlyBudget) | monthly budget | `string` | n/a | yes |
| <a name="input_network_interfaces"></a> [network\_interfaces](#input\_network\_interfaces) | A map of objects representing each network virtual machine network interface<br><br>- `<map key>` - Use a custom map key to define each network interface<br>  - `name` = (Required) The name of the Network Interface. Changing this forces a new resource to be created.<br>  - `ip_configurations` - A required map of objects defining each interfaces IP configurations<br>    - `<map key>` - Use a custom map key to define each ip configuration<br>      - `name`                                                        = (Required) - A name used for this IP Configuration.<br>      - `app_gateway_backend_pools`                                   = (Optional) - A map defining app gateway backend pool(s) this IP configuration should be associated to.<br>        - `<map key>` - Use a custom map key to define each app gateway backend pool association.  This is done to handle issues with certain details not being known until after apply.<br>          - `app_gateway_backend_pool_resource_id`                    = (Required) - An application gateway backend pool Azure Resource ID can be entered to join this ip configuration to the backend pool of an Application Gateway.  <br>      - `create_public_ip_address`                                    = (Optional) - Select true here to have the module create the public IP address for this IP Configuration<br>      - `gateway_load_balancer_frontend_ip_configuration_resource_id` = (Optional) - The Frontend IP Configuration Azure Resource ID of a Gateway SKU Load Balancer.)<br>      - `is_primary_ipconfiguration`                                  = (Optional) - Is this the Primary IP Configuration? Must be true for the first ip\_configuration when multiple are specified. <br>      - `load_balancer_backend_pools`                                 = (Optional) - A map defining load balancer backend pool(s) this IP configuration should be associated to.<br>        - `<map key>` - Use a custom map key to define each load balancer backend pool association.  This is done to handle issues with certain details not being known until after apply.<br>          - `load_balancer_backend_pool_resource_id`                  = (Required) - A Load Balancer backend pool Azure Resource ID can be entered to join this ip configuration to a load balancer backend pool.<br>      - `load_balancer_nat_rules`                                     = (Optional) - A map defining load balancer NAT rule(s) that this IP Configuration should be associated to.<br>        - `<map key>` - Use a custom map key to define each load balancer NAT Rule association.  This is done to handle issues with certain details not being known until after apply.<br>          - `load_balancer_nat_rule_resource_id`                        = (Optional) - A Load Balancer Nat Rule Azure Resource ID can be entered to associate this ip configuration to a load balancer NAT rule.<br>      - `private_ip_address`                                          = (Optional) - The Static IP Address which should be used. Configured when private\_ip\_address\_allocation is set to Static<br>      - `private_ip_address_allocation`                               = (Optional) - The allocation method used for the Private IP Address. Possible values are Dynamic and Static. Dynamic means "An IP is automatically assigned during creation of this Network Interface" and is the default; Static means "User supplied IP address will be used" <br>      - `private_ip_address_version`                                  = (Optional) - The IP Version to use. Possible values are IPv4 or IPv6. Defaults to IPv4.<br>      - `private_ip_subnet_resource_id`                               = (Optional) - The Azure Resource ID of the Subnet where this Network Interface should be located in.<br>      - `public_ip_address_resource_id`                               = (Optional) - Reference to a Public IP Address resource ID to associate with this NIC<br>  - `accelerated_networking_enabled`                                  = (Optional) - Should Accelerated Networking be enabled? Defaults to false. Only certain Virtual Machine sizes are supported for Accelerated Networking. To use Accelerated Networking in an Availability Set, the Availability Set must be deployed onto an Accelerated Networking enabled cluster.<br>  - `application_security_groups`                                     = (Optional) - A map defining the Application Security Group(s) that this network interface should be a part of.<br>    - `<map key>` - Use a custom map key to define each Application Security Group association.  This is done to handle issues with certain details not being known until after apply. <br>      - `application_security_group_resource_id`                     = (Required) - The Application Security Group (ASG) Azure Resource ID for this Network Interface to be associated to.<br>  - `diagnostic_settings`                                             = (Optional) - A map of objects defining the network interface resource diagnostic settings <br>    - `<map key>` - Use a custom map key to define each diagnostic setting configuration<br>      - `name`                                     = (required) - Name to use for the Diagnostic setting configuration.  Changing this creates a new resource<br>      - `event_hub_authorization_rule_resource_id` = (Optional) - The Event Hub Namespace Authorization Rule Resource ID when sending logs or metrics to an Event Hub Namespace<br>      - `event_hub_name`                           = (Optional) - The Event Hub name when sending logs or metrics to an Event Hub<br>      - `log_analytics_destination_type`           = (Optional) - Valid values are null, AzureDiagnostics, and Dedicated.  Defaults to null<br>      - `log_categories_and_groups`                = (Optional) - List of strings used to define log categories and groups. Currently not valid for the VM resource<br>      - `marketplace_partner_resource_id`          = (Optional) - The marketplace partner solution Azure Resource ID when sending logs or metrics to a partner integration<br>      - `metric_categories`                        = (Optional) - List of strings used to define metric categories. Currently only AllMetrics is valid<br>      - `storage_account_resource_id`              = (Optional) - The Storage Account Azure Resource ID when sending logs or metrics to a Storage Account<br>      - `workspace_resource_id`                    = (Optional) - The Log Analytics Workspace Azure Resource ID when sending logs or metrics to a Log Analytics Workspace<br>  - `dns_servers`                                                     = (Optional) - A list of IP Addresses defining the DNS Servers which should be used for this Network Interface.<br>  - `inherit_tags`                                                    = (Optional) - Defaults to true.  Set this to false if only the tags defined on this resource should be applied. This is potential future functionality and is currently ignored.<br>  - `internal_dns_name_label`                                         = (Optional) - The (relative) DNS Name used for internal communications between Virtual Machines in the same Virtual Network.<br>  - `ip_forwarding_enabled`                                           = (Optional) - Should IP Forwarding be enabled? Defaults to false<br>  - `lock_level`                                                      = (Optional) - Set this value to override the resource level lock value.  Possible values are `None`, `CanNotDelete`, and `ReadOnly`.<br>  - `lock_name`                                                       = (Optional) - The name for the lock on this nic<br>  - `network_security_groups`                                         = (Optional) - A map describing Network Security Group(s) that this Network Interface should be associated to.<br>    - `<map key>` - Use a custom map key to define each network security group association.  This is done to handle issues with certain details not being known until after apply.<br>      - `network_security_group_resource_id` = (Optional) - The Network Security Group (NSG) Azure Resource ID used to associate this Network Interface to the NSG.<br>  - `resource_group_name` (Optional) - Specify a resource group name if the network interface should be created in a separate resource group from the virtual machine<br>  - `role_assignments` = An optional map of objects defining role assignments on the individual network configuration resource <br>    - `<map key>` - Use a custom map key to define each role assignment configuration<br>      - `assign_to_child_public_ip_addresses`        = (Optional) - Set this to true if the assignment should also apply to any children public IP addresses.<br>      - `condition`                                  = (Optional) - The condition that limits the resources that the role can be assigned to. Changing this forces a new resource to be created.<br>      - `condition_version`                          = (Optional) - The version of the condition. Possible values are 1.0 or 2.0. Changing this forces a new resource to be created.<br>      - `delegated_managed_identity_resource_id`     = (Optional) - The delegated Azure Resource Id which contains a Managed Identity. Changing this forces a new resource to be created.<br>      - `description`                                = (Optional) - The description for this Role Assignment. Changing this forces a new resource to be created.<br>      - `principal_id`                               = (optional) - The ID of the Principal (User, Group or Service Principal) to assign the Role Definition to. Changing this forces a new resource to be created.<br>      - `role_definition_id_or_name`                 = (Optional) - The Scoped-ID of the Role Definition or the built-in role name. Changing this forces a new resource to be created. Conflicts with role\_definition\_name <br>      - `skip_service_principal_aad_check`           = (Optional) - If the principal\_id is a newly provisioned Service Principal set this value to true to skip the Azure Active Directory check which may fail due to replication lag. This argument is only valid if the principal\_id is a Service Principal identity. Defaults to true.<br>      - `principal_type`                             = (Optional) - The type of the `principal_id`. Possible values are `User`, `Group` and `ServicePrincipal`. It is necessary to explicitly set this attribute when creating role assignments if the principal creating the assignment is constrained by ABAC rules that filters on the PrincipalType attribute.<br>  - `tags`                           = (Optional) - A mapping of tags to assign to the resource.<br><br>Example Inputs:<pre>hcl<br>#Simple private IP single NIC with IPV4 private address<br>network_interfaces = {<br>  network_interface_1 = {<br>    name = "testnic1"<br>    ip_configurations = {<br>      ip_configuration_1 = {<br>        name                          = "testnic1-ipconfig1"<br>        private_ip_subnet_resource_id = azurerm_subnet.this_subnet_1.id<br>      }<br>    }<br>  }<br>}<br><br>#Simple NIC with private and public IP address <br>network_interfaces = {<br>  network_interface_1 = {<br>    name = "testnic1"<br>    ip_configurations = {<br>      ip_configuration_1 = {<br>        name                          = "testnic1-ipconfig1"<br>        private_ip_subnet_resource_id = azurerm_subnet.this_subnet_1.id<br>        create_public_ip_address      = true<br>        public_ip_address_name        = "vm1-testnic1-publicip1"<br>      }<br>    }<br>  }<br>}</pre> | <pre>map(object({<br>    name = string<br>    ip_configurations = map(object({<br>      name = string<br>      app_gateway_backend_pools = optional(map(object({<br>        app_gateway_backend_pool_resource_id = string<br>      })), {})<br>      create_public_ip_address                                    = optional(bool, false)<br>      gateway_load_balancer_frontend_ip_configuration_resource_id = optional(string)<br>      is_primary_ipconfiguration                                  = optional(bool, true)<br>      load_balancer_backend_pools = optional(map(object({<br>        load_balancer_backend_pool_resource_id = string<br>      })), {})<br>      load_balancer_nat_rules = optional(map(object({<br>        load_balancer_nat_rule_resource_id = string<br>      })), {})<br>      private_ip_address            = optional(string)<br>      private_ip_address_allocation = optional(string, "Dynamic")<br>      private_ip_address_version    = optional(string, "IPv4")<br>      private_ip_subnet_resource_id = optional(string)<br>      public_ip_address_lock_name   = optional(string)<br>      public_ip_address_name        = optional(string)<br>      public_ip_address_resource_id = optional(string)<br>    }))<br>    accelerated_networking_enabled = optional(bool, false)<br>    application_security_groups = optional(map(object({<br>      application_security_group_resource_id = string<br>    })), {})<br>    diagnostic_settings = optional(map(object({<br>      name                                     = optional(string, null)<br>      log_categories                           = optional(set(string), [])<br>      log_groups                               = optional(set(string), [])<br>      metric_categories                        = optional(set(string), ["AllMetrics"])<br>      log_analytics_destination_type           = optional(string, null)<br>      workspace_resource_id                    = optional(string, null)<br>      storage_account_resource_id              = optional(string, null)<br>      event_hub_authorization_rule_resource_id = optional(string, null)<br>      event_hub_name                           = optional(string, null)<br>      marketplace_partner_resource_id          = optional(string, null)<br>    })), {})<br>    dns_servers             = optional(list(string))<br>    inherit_tags            = optional(bool, true)<br>    internal_dns_name_label = optional(string)<br>    ip_forwarding_enabled   = optional(bool, false)<br>    lock_level              = optional(string)<br>    lock_name               = optional(string)<br>    network_security_groups = optional(map(object({<br>      network_security_group_resource_id = string<br>    })), {})<br>    resource_group_name = optional(string)<br>    role_assignments = optional(map(object({<br>      principal_id                           = string<br>      role_definition_id_or_name             = string<br>      assign_to_child_public_ip_addresses    = optional(bool, true)<br>      condition                              = optional(string, null)<br>      condition_version                      = optional(string, null)<br>      delegated_managed_identity_resource_id = optional(string, null)<br>      description                            = optional(string, null)<br>      skip_service_principal_aad_check       = optional(bool, false)<br>      principal_type                         = optional(string, null)<br>    })), {})<br>    tags = optional(map(string), null)<br>  }))</pre> | `null` | no |
| <a name="input_nic_nsg"></a> [nic\_nsg](#input\_nic\_nsg) | NIC NSG for the Virtual machine NIC | `string` | `""` | no |
| <a name="input_nsg_diagnostic_settings"></a> [nsg\_diagnostic\_settings](#input\_nsg\_diagnostic\_settings) | A map of diagnostic settings to create on the Key Vault. The map key is deliberately arbitrary to avoid issues where map keys maybe unknown at plan time.<br><br>- `name` - (Optional) The name of the diagnostic setting. One will be generated if not set, however this will not be unique if you want to create multiple diagnostic setting resources.<br>- `log_categories` - (Optional) A set of log categories to send to the log analytics workspace. Defaults to `[]`.<br>- `log_groups` - (Optional) A set of log groups to send to the log analytics workspace. Defaults to `["allLogs"]`.<br>- `metric_categories` - (Optional) A set of metric categories to send to the log analytics workspace. Defaults to `["AllMetrics"]`.<br>- `log_analytics_destination_type` - (Optional) The destination type for the diagnostic setting. Possible values are `Dedicated` and `AzureDiagnostics`. Defaults to `Dedicated`.<br>- `workspace_resource_id` - (Optional) The resource ID of the log analytics workspace to send logs and metrics to.<br>- `storage_account_resource_id` - (Optional) The resource ID of the storage account to send logs and metrics to.<br>- `event_hub_authorization_rule_resource_id` - (Optional) The resource ID of the event hub authorization rule to send logs and metrics to.<br>- `event_hub_name` - (Optional) The name of the event hub. If none is specified, the default event hub will be selected.<br>- `marketplace_partner_resource_id` - (Optional) The full ARM resource ID of the Marketplace resource to which you would like to send Diagnostic LogsLogs. | <pre>map(object({<br>    name                                     = optional(string, null)<br>    log_categories                           = optional(set(string), [])<br>    log_groups                               = optional(set(string), ["allLogs"])<br>    metric_categories                        = optional(set(string), ["AllMetrics"])<br>    log_analytics_destination_type           = optional(string, "Dedicated")<br>    workspace_resource_id                    = optional(string, null)<br>    storage_account_resource_id              = optional(string, null)<br>    event_hub_authorization_rule_resource_id = optional(string, null)<br>    event_hub_name                           = optional(string, null)<br>    marketplace_partner_resource_id          = optional(string, null)<br>  }))</pre> | `{}` | no |
| <a name="input_nsg_rg"></a> [nsg\_rg](#input\_nsg\_rg) | Resource Group for the NSG | `string` | `""` | no |
| <a name="input_operating_system_disk_cache"></a> [operating\_system\_disk\_cache](#input\_operating\_system\_disk\_cache) | Type of caching to use on the OS disk - Options: None, ReadOnly or ReadWrite | `string` | `"ReadWrite"` | no |
| <a name="input_operating_system_disk_size_gb"></a> [operating\_system\_disk\_size\_gb](#input\_operating\_system\_disk\_size\_gb) | Size of the internal OS disk in gigabytes | `number` | `null` | no |
| <a name="input_operating_system_disk_type"></a> [operating\_system\_disk\_type](#input\_operating\_system\_disk\_type) | Type of storage account to use with the OS disk - Options: Standard\_LRS, StandardSSD\_LRS or Premium\_LRS | `string` | `"StandardSSD_LRS"` | no |
| <a name="input_operating_system_disk_write_accelerator"></a> [operating\_system\_disk\_write\_accelerator](#input\_operating\_system\_disk\_write\_accelerator) | Should Write Accelerator be Enabled for this OS Disk? | `bool` | `false` | no |
| <a name="input_plan"></a> [plan](#input\_plan) | An object variable that defines the Marketplace image this virtual machine should be created from. If you use the plan block with one of Microsoft's marketplace images (e.g. publisher = "MicrosoftWindowsServer"). This may prevent the purchase of the offer. An example Azure API error: The Offer: 'WindowsServer' cannot be purchased by subscription: '12345678-12234-5678-9012-123456789012' as it is not to be sold in market: 'US'. Please choose a subscription which is associated with a different market.<br><br>- `name`      = (Required) Specifies the Name of the Marketplace Image this Virtual Machine should be created from. Changing this forces a new resource to be created.<br>- `product`   = (Required) Specifies the Product of the Marketplace Image this Virtual Machine should be created from. Changing this forces a new resource to be created.<br>- `publisher` = (Required) Specifies the Publisher of the Marketplace Image this Virtual Machine should be created from. Changing this forces a new resource to be created.<br><br><br>Example Input:<pre>hcl<br>plan = {<br>  name      = "17_04_02-payg-essentials"<br>  product   = "cisco-8000v"<br>  publisher = "cisco"<br>}</pre> | <pre>object({<br>    name      = string<br>    product   = string<br>    publisher = string<br>  })</pre> | `null` | no |
| <a name="input_priority"></a> [priority](#input\_priority) | (Optional) Specifies the priority of this Virtual Machine. Possible values are `Regular` and `Spot`. Defaults to `Regular`. Changing this forces a new resource to be created. | `string` | `"Regular"` | no |
| <a name="input_proximity_placement_group"></a> [proximity\_placement\_group](#input\_proximity\_placement\_group) | (Optional) The ID of the Proximity Placement Group which the Virtual Machine should be assigned to. Conflicts with `capacity_reservation_group_resource_id`. | `string` | `null` | no |
| <a name="input_public_ip_enabled"></a> [public\_ip\_enabled](#input\_public\_ip\_enabled) | Create and attach a public interface? | `bool` | `false` | no |
| <a name="input_public_ip_sku"></a> [public\_ip\_sku](#input\_public\_ip\_sku) | SKU to be used with this public IP - Basic or Standard | `string` | `"Standard"` | no |
| <a name="input_public_network_access_enabled"></a> [public\_network\_access\_enabled](#input\_public\_network\_access\_enabled) | (optional) Specify Public Network Access. true (default), false | `bool` | `true` | no |
| <a name="input_public_nsg"></a> [public\_nsg](#input\_public\_nsg) | Public NSG for the PIP | `string` | `""` | no |
| <a name="input_public_nsg_rg"></a> [public\_nsg\_rg](#input\_public\_nsg\_rg) | Public NSG resource group for the PIP | `string` | `""` | no |
| <a name="input_public_only"></a> [public\_only](#input\_public\_only) | Create a public only interface? | `bool` | `false` | no |
| <a name="input_public_subnet"></a> [public\_subnet](#input\_public\_subnet) | Public subnet name for PIP | `string` | `""` | no |
| <a name="input_public_vnet"></a> [public\_vnet](#input\_public\_vnet) | Public vnet name for PIP | `string` | `""` | no |
| <a name="input_public_vnet_rg"></a> [public\_vnet\_rg](#input\_public\_vnet\_rg) | Public vnet resource group for PIP | `string` | `""` | no |
| <a name="input_recovery_sku"></a> [recovery\_sku](#input\_recovery\_sku) | The recovery services vault SKU to use | `string` | `"Standard"` | no |
| <a name="input_recovery_vault_name"></a> [recovery\_vault\_name](#input\_recovery\_vault\_name) | (Optional) - The name of the recovery services vault if exist | `string` | `""` | no |
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | name of the resource group where to place the vm | `string` | n/a | yes |
| <a name="input_resource_group_storage_name"></a> [resource\_group\_storage\_name](#input\_resource\_group\_storage\_name) | The Storage Account's resurce name. Defaault to deployment resource group | `string` | `null` | no |
| <a name="input_resource_group_vault_recovery"></a> [resource\_group\_vault\_recovery](#input\_resource\_group\_vault\_recovery) | (Optional) - The resource group name for the resource group containing the recovery services vault. If not supplied it will default to the deployment resource group. | `string` | `""` | no |
| <a name="input_resourcetype"></a> [resourcetype](#input\_resourcetype) | the resource type being deployed see naming standards for example | `string` | `"vm"` | no |
| <a name="input_secure_boot_enabled"></a> [secure\_boot\_enabled](#input\_secure\_boot\_enabled) | (Optional) Specifies whether secure boot should be enabled on the virtual machine. Changing this forces a new resource to be created. | `bool` | `null` | no |
| <a name="input_soft_delete_enabled"></a> [soft\_delete\_enabled](#input\_soft\_delete\_enabled) | (optional) Specify Setting for Soft Delete. true (default), false | `bool` | `true` | no |
| <a name="input_source_image_offer"></a> [source\_image\_offer](#input\_source\_image\_offer) | Operating System Name | `string` | `null` | no |
| <a name="input_source_image_publisher"></a> [source\_image\_publisher](#input\_source\_image\_publisher) | Operating System Publisher | `string` | `null` | no |
| <a name="input_source_image_sku"></a> [source\_image\_sku](#input\_source\_image\_sku) | Operating System SKU | `string` | `null` | no |
| <a name="input_source_image_version"></a> [source\_image\_version](#input\_source\_image\_version) | Operating System Version | `string` | `"latest"` | no |
| <a name="input_sr_sec_exception"></a> [sr\_sec\_exception](#input\_sr\_sec\_exception) | Security Exception for the public IP | `string` | `""` | no |
| <a name="input_storage_analytics_name"></a> [storage\_analytics\_name](#input\_storage\_analytics\_name) | The Storage Account's Blob Name which should hold the virtual machine's diagnostic files. If null it will use managed ones | `string` | `null` | no |
| <a name="input_storage_mode_type"></a> [storage\_mode\_type](#input\_storage\_mode\_type) | (optional) Specify Storage type of the Recovery Services Vault. GeoRedundant (default), LocallyRedundant, ZoneRedundant | `string` | `"GeoRedundant"` | no |
| <a name="input_subnet_name"></a> [subnet\_name](#input\_subnet\_name) | Specifies the name of the Subnet. | `string` | n/a | yes |
| <a name="input_tags"></a> [tags](#input\_tags) | tags to add to the vm | `map(any)` | `null` | no |
| <a name="input_team_spn"></a> [team\_spn](#input\_team\_spn) | The Service Principal Name of the team that will be able to modifyteam resources | `list(string)` | `[]` | no |
| <a name="input_team_vm_admin_groups"></a> [team\_vm\_admin\_groups](#input\_team\_vm\_admin\_groups) | The Admin Group of the team that will be able to modify team resources | `list(string)` | `[]` | no |
| <a name="input_team_vm_contributor_groups"></a> [team\_vm\_contributor\_groups](#input\_team\_vm\_contributor\_groups) | The Contributor Group of the team that will be able to modify team resources | `list(string)` | `[]` | no |
| <a name="input_team_vm_reader_groups"></a> [team\_vm\_reader\_groups](#input\_team\_vm\_reader\_groups) | The Reader Group of the team that will be able to modify team resources | `list(string)` | `[]` | no |
| <a name="input_team_vm_userlogin_groups"></a> [team\_vm\_userlogin\_groups](#input\_team\_vm\_userlogin\_groups) | The User Login Group of the team that will be able to modify team resources | `list(string)` | `[]` | no |
| <a name="input_total_machine_count"></a> [total\_machine\_count](#input\_total\_machine\_count) | Number of VMs to be provisioned | `number` | `1` | no |
| <a name="input_ultra_ssd_enabled"></a> [ultra\_ssd\_enabled](#input\_ultra\_ssd\_enabled) | Should the capacity to enable Data Disks of the UltraSSD\_LRS storage account type be supported on this Virtual Machine. | `bool` | `false` | no |
| <a name="input_virtual_machine_size"></a> [virtual\_machine\_size](#input\_virtual\_machine\_size) | Instance size to be provisioned | `string` | n/a | yes |
| <a name="input_vm_admin_pwd_keyvault_name"></a> [vm\_admin\_pwd\_keyvault\_name](#input\_vm\_admin\_pwd\_keyvault\_name) | keyvault name for the vm admin password | `string` | `""` | no |
| <a name="input_vm_admin_pwd_keyvault_secret_name"></a> [vm\_admin\_pwd\_keyvault\_secret\_name](#input\_vm\_admin\_pwd\_keyvault\_secret\_name) | keyvault secret name for the vm admin password | `string` | `""` | no |
| <a name="input_vnet_name"></a> [vnet\_name](#input\_vnet\_name) | Specifies the name of the Virtual Network this Subnet is located within | `string` | n/a | yes |
| <a name="input_vnet_resource_group_name"></a> [vnet\_resource\_group\_name](#input\_vnet\_resource\_group\_name) | resource group name where the vnet is installed | `string` | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_admin_passwords"></a> [admin\_passwords](#output\_admin\_passwords) | Returns the admin password if installation is configured to use the password.  Otherwise returns null |
| <a name="output_admin_ssh_keys"></a> [admin\_ssh\_keys](#output\_admin\_ssh\_keys) | Returns a list containing all of the provided or generated ssh keys. This is a single key if the generation option is selected and no additional keys are provided. |
| <a name="output_admin_username"></a> [admin\_username](#output\_admin\_username) | The admin username used when creating this virtual machine. |
| <a name="output_backup_vault_id"></a> [backup\_vault\_id](#output\_backup\_vault\_id) | The full object for the deployed backup vault.  This is marked sensitive as it contains specific sensitive values |
| <a name="output_backup_vault_name"></a> [backup\_vault\_name](#output\_backup\_vault\_name) | The Azure resource id for the deployed backup vault |
| <a name="output_data_disks"></a> [data\_disks](#output\_data\_disks) | The full ARM object map associated with any deployed data disk(s). Exporting this in the event that a disk property not exposed as part of the azurerm vm export is required. |
| <a name="output_name"></a> [name](#output\_name) | The name used for the virtual machines name. |
| <a name="output_network_interfaces"></a> [network\_interfaces](#output\_network\_interfaces) | The full ARM object map associated with the deployed network interface(s). Exporting this in the event that a nic property not exposed as part of the azurerm vm export is required. |
| <a name="output_nsg_name"></a> [nsg\_name](#output\_nsg\_name) | The name of the Network Security Group resource |
| <a name="output_nsg_resource"></a> [nsg\_resource](#output\_nsg\_resource) | The Network Security Group resource |
| <a name="output_nsg_resource_id"></a> [nsg\_resource\_id](#output\_nsg\_resource\_id) | The id of the Network Security Group resource |
| <a name="output_public_ips"></a> [public\_ips](#output\_public\_ips) | The full ARM object map associated with any deployed public ip(s). Exporting this in the event that a public ip property not exposed as part of the azurerm vm export is required. |
| <a name="output_resource"></a> [resource](#output\_resource) | The full object for the deployed virtual machine.  This is marked sensitive as it contains specific sensitive values |
| <a name="output_resource_id"></a> [resource\_id](#output\_resource\_id) | The Azure resource id for the deployed virtual machine |
| <a name="output_system_assigned_mi_principal_id"></a> [system\_assigned\_mi\_principal\_id](#output\_system\_assigned\_mi\_principal\_id) | The principal id of the system managed identity assigned to the virtual machine |
| <a name="output_virtual_machine"></a> [virtual\_machine](#output\_virtual\_machine) | The full object for the deployed virtual machine.  This is marked sensitive as it contains specific sensitive values. This output has been duplicated to the resource output to comply with the spec and may be deprecated in the future. |
| <a name="output_virtual_machine_azurerm"></a> [virtual\_machine\_azurerm](#output\_virtual\_machine\_azurerm) | The default attributes exported by the azurerm provider.  These are defined as a map containing the following attributes<br>    id                   = The Azure resource ID of the deployed virtual machine<br>    identity             = { #An identity map with the following attributes      <br>        principal\_id     = The Principal ID associated with the virtual machine's system assigned managed identity<br>        tenant\_id        = The Tenant ID associated with the virtual machine's system assigned managed identity<br>    }<br>    private\_ip\_address   = The primary private IP address of the deployed virtual machine<br>    private\_ip\_addresses = A list of Private IP Addresses assigned to this Virtual Machine.<br>    public\_ip\_address    = The Primary Public IP Address assigned to this Virtual Machine.<br>    public\_ip\_addresses  = A list of the Public IP Addresses assigned to this Virtual Machine.<br>    virtual\_machine\_id   = A 128-bit identifier which uniquely identifies this Virtual Machine. |
<!-- END_TF_DOCS -->